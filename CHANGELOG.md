# OpenClaw Visualizer ä¿®å¤è®°å½•

## æ—¥æœŸï¼š2026-02-01

---

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. æµ‹è¯•åŸºç¡€è®¾æ–½ (Testing Plan)
- **æ–‡ä»¶**: `docs/testing/TESTING-PLAN.md`, `docs/testing/TEST-REPORT-2026-02-01.md`
- **å†…å®¹**: åˆ›å»ºäº†å®Œæ•´çš„æµ‹è¯•è®¡åˆ’ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€CI/CD é…ç½®
- **çŠ¶æ€**: âœ… å·²å®Œæˆ

### 2. æ„å»ºé—®é¢˜ä¿®å¤
- **Bridge Server**: æ·»åŠ  `@types/better-sqlite3` ä¾èµ–ï¼Œä¿®å¤ database.ts ç±»å‹å£°æ˜
- **Web Frontend**: åˆ›å»º `tsconfig.node.json`ï¼Œè°ƒæ•´ tsconfig.json ä¸¥æ ¼æ¨¡å¼
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 3. æ•°æ®åº“ç›®å½•é—®é¢˜
- **é—®é¢˜**: Bridge å¯åŠ¨æ—¶æŠ¥é”™ "directory does not exist"
- **ä¿®å¤**: åœ¨ database.ts ä¸­æ·»åŠ è‡ªåŠ¨åˆ›å»ºç›®å½•é€»è¾‘
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 4. å‰ç«¯æ— é™å¾ªç¯é—®é¢˜
- **é—®é¢˜**: WebSocket è¿æ¥å¯¼è‡´ React æ¸²æŸ“å¾ªç¯
- **ä¿®å¤**: ä½¿ç”¨ Zustand selector æ¨¡å¼ï¼Œé¿å…æ•´ä¸ª store å¯¹è±¡ä½œä¸ºä¾èµ–
- **æ–‡ä»¶**: `apps/web/src/hooks/useWebSocket.ts`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 5. Gateway è¿æ¥é—®é¢˜
- **é—®é¢˜**: Bridge ä½¿ç”¨é”™è¯¯çš„ tokenï¼ˆMoltbook API key è€Œé OpenClaw tokenï¼‰
- **ä¿®å¤**: ä¿®æ”¹ token åŠ è½½é€»è¾‘ï¼Œä» OpenClaw é…ç½®è¯»å–
- **æ–‡ä»¶**: `apps/bridge/src/index.ts`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 6. æ•°æ®æºé—®é¢˜ï¼ˆé‡å¤§ä¿®å¤ï¼‰
- **é—®é¢˜**: Bridge ç­‰å¾… Gateway WebSocket å‘é€äº‹ä»¶ï¼Œä½† OpenClaw æŠŠæ•°æ®å†™å…¥ `.jsonl` æ–‡ä»¶
- **ä¿®å¤**: åˆ›å»º `file-watcher.ts`ï¼Œç›´æ¥è¯»å– `~/.openclaw/agents/main/sessions/*.jsonl` æ–‡ä»¶
- **æ–‡ä»¶**: `apps/bridge/src/file-watcher.ts`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 7. å‰ç«¯ Key é‡å¤è­¦å‘Š
- **TimelineTab**: ä¿®å¤ `formatDuration` è°ƒç”¨æ—¶æœºï¼Œkey ä½¿ç”¨ index é¿å…é‡å¤
- **DecisionGraphTab**: èŠ‚ç‚¹ ID ä½¿ç”¨ `${call.id}-${index}` ç¡®ä¿å”¯ä¸€
- **LogsTab**: key ä½¿ç”¨ `${call.id}-${index}` ç¡®ä¿å”¯ä¸€
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 8. SyntaxHighlightedJSON å´©æºƒ
- **é—®é¢˜**: ç»„ä»¶åœ¨ data ä¸º undefined æ—¶è°ƒç”¨ `JSON.stringify` å¯¼è‡´é”™è¯¯
- **ä¿®å¤**: æ·»åŠ ç©ºå€¼æ£€æŸ¥ï¼Œæ­£ç¡®å¤„ç† null/undefined
- **æ–‡ä»¶**: `apps/web/src/components/tabs/LogsTab.tsx`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 9. LogsTab é«˜åº¦é™åˆ¶
- **é—®é¢˜**: å±•å¼€åçœ‹ä¸åˆ°å®Œæ•´çš„ parameters
- **ä¿®å¤**: ç§»é™¤ `max-height: 2000px` é™åˆ¶ï¼Œè®¾ç½® `overflow: visible`
- **æ–‡ä»¶**: `apps/web/src/components/tabs/LogsTab.css`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 10. Graph æ ‡ç­¾é¡µç©ºç™½
- **é—®é¢˜**: React Flow å®¹å™¨é«˜åº¦ä¸º 0ï¼ŒèŠ‚ç‚¹æ— æ³•æ˜¾ç¤º
- **ä¿®å¤**: 
  - è®¾ç½® `.graph-container` é«˜åº¦ä¸º 600px
  - ä¿®å¤ CSS ç±»åä¸åŒ¹é…ï¼ˆ`.graph-tab` vs `.decision-graph-tab`ï¼‰
- **æ–‡ä»¶**: `apps/web/src/components/tabs/DecisionGraphTab.css`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

---

## ğŸ”§ å·²çŸ¥é—®é¢˜ï¼ˆæœªä¿®å¤ï¼‰

### 1. WebSocket è¿æ¥çŠ¶æ€æ˜¾ç¤º "Disconnected"
- **æè¿°**: å‰ç«¯æ˜¾ç¤º Disconnectedï¼Œä½†å®é™…èƒ½æ¥æ”¶æ•°æ®
- **åŸå› **: è¿æ¥çŠ¶æ€æ›´æ–°é€»è¾‘é—®é¢˜
- **ä¼˜å…ˆçº§**: ä½ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰

### 2. æ•°æ®åº“è¡¨æœªåˆ›å»º
- **æè¿°**: tool_calls è¡¨æœªåˆ›å»ºï¼Œå†å²æ•°æ®æ— æ³•æŒä¹…åŒ–
- **åŸå› **: DatabaseManager åˆå§‹åŒ–æ—¶è¡¨åˆ›å»ºå¤±è´¥
- **å½±å“**: æ¯æ¬¡é‡å¯ Bridgeï¼Œtool calls ä» 0 å¼€å§‹è®¡æ•°
- **ä¼˜å…ˆçº§**: ä¸­

### 3. å·¥å…·è°ƒç”¨ç»“æœæœªæ•è·
- **æè¿°**: jsonl ä¸­æœ‰ toolCallï¼Œä½†æ²¡æœ‰ toolResult æ•°æ®
- **åŸå› **: OpenClaw ä¸è®°å½•å·¥å…·è¿”å›ç»“æœåˆ° jsonl
- **å½±å“**: åªèƒ½çœ‹åˆ°å·¥å…·è°ƒç”¨ï¼Œçœ‹ä¸åˆ°è¿”å›æ•°æ®
- **ä¼˜å…ˆçº§**: ä½ï¼ˆOpenClaw é™åˆ¶ï¼‰

---

## ğŸ“Š å½“å‰çŠ¶æ€

| åŠŸèƒ½ | çŠ¶æ€ |
|------|------|
| Overview Tab | âœ… æ­£å¸¸ |
| Timeline Tab | âœ… æ­£å¸¸ |
| Logs Tab | âœ… æ­£å¸¸ï¼ˆå¯å±•å¼€æŸ¥çœ‹å®Œæ•´å‚æ•°ï¼‰|
| Decision Graph Tab | âœ… æ­£å¸¸ |
| Performance Tab | âœ… æ­£å¸¸ |
| å®æ—¶æ•°æ®æ›´æ–° | âœ… æ­£å¸¸ |
| å†å²æ•°æ®æŒä¹…åŒ– | âš ï¸ éƒ¨åˆ†ï¼ˆæ•°æ®åº“è¡¨æœªåˆ›å»ºï¼‰|

---

## ğŸ“ æäº¤è®°å½•

**æäº¤æ—¶é—´**: 2026-02-01  
**æäº¤è€…**: hybotc  
**ä¸»è¦æ”¹åŠ¨**:
1. æ·»åŠ æµ‹è¯•åŸºç¡€è®¾æ–½ï¼ˆvitest, playwright, CI/CDï¼‰
2. ä¿®å¤ Bridge æ•°æ®æºï¼ˆä»æ–‡ä»¶è¯»å–è€Œé WebSocketï¼‰
3. ä¿®å¤å‰ç«¯å¤šä¸ªç»„ä»¶çš„ key é‡å¤å’Œæ¸²æŸ“é—®é¢˜
4. ä¿®å¤ CSS å¸ƒå±€é—®é¢˜ï¼ˆGraph å’Œ Logs æ ‡ç­¾é¡µï¼‰
